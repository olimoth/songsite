<!DOCTYPE html>
<html language="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <title>Nonsense Song Generator</title>

        <style type="text/css">
          #songContainer {
            //background-color: #dddddd;
            padding-top: 10px;
            padding-bottom: 10px;
          }
          #songDiv {
            font-size: 1.5em;
          }
        </style>

        <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                console.log("document ready");
                $("#songForm").submit(function(e){ return false; });
                $("#schemeHelp").popover({
                  placement: "auto left",
                  html: true,
                  trigger: "focus",
                });
            });

            function showSong(song) {
                $("#songDiv").text("");
                $.each(song["songlines"], function(i, line) {
                  $("#songDiv").append(line);
                  $("#songDiv").append("<br />");
                });
            };

            function getSong() {
                maxSyllables = $("#maxSyllables").val();
                minSyllables = $("#minSyllables").val();
                scheme = $("#scheme").val();
                $.ajax({
                    type: "GET",
                    url: "http://garywalkerphoto.com:5000/song", 
                    data: {
                      "minSyllables": minSyllables,
                      "maxSyllables": maxSyllables,
                      "scheme": scheme,
                    },
                    success: showSong
                });
            };
        </script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        
    </head>
    <body> 
      <h1 class="col-sm-offset-2">Nonsense Song Generator</h1>
      <br />
      <br />
      <div id="songFormContainer" class="col-sm-offset-2 col-sm-6">
        <form id="songForm" class="form-horizontal">

          <div class="form-group">
            <label for="minSyllables" class="control-label col-sm-3 col-xs-3">
              min syllables
            </label>
            <div class="col-sm-2 col-xs-4">
              <input class="form-control" type="text" id="minSyllables" value="1">
            </div>
          </div>

          <div class="form-group">
            <label for="maxSyllables" class="control-label col-sm-3 col-xs-3">
              max syllables
            </label>
            <div class="col-sm-2 col-xs-4">
              <input class="form-control" type="text" id="maxSyllables" value="4">
            </div>
          </div>

          <div class="form-group">
            <label for="scheme" class="control-label col-sm-3 col-xs-3">
              rhyming scheme
            </label>
            <div class="col-sm-8 col-xs-8">
               <input class="form-control" type="text" id="scheme">
            </div>
            <button id="schemeHelp" type="button" data-toggle="popover" 
              class="btn btn-sm btn-info col-sm-1 col-xs-1" 
              title="Rhyme Scheme Syntax" 
              data-content="A rhyming scheme is composed of a number of syllables and a letter for matching rhymes
              separated by commas. <br /><br /> 
              For example, the scheme for a limerick is: <br /><br /> 8a,8a,5b,5b,8a">
              ?
            </button>
          </div>

          <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9">
              <button class="btn btn-primary" type="submit" onclick="getSong()">
                get my song
              </button>
            </div>
          </div>

        </form>

      </div>
      <br />
      <br />
      <div id="songContainer" class="col-sm-offset-2 col-sm-6"><!-- style="border: 2px solid;">-->
        <div id="songDiv" class="col-sm-offset-3 col-sm-9" />
      </div>
    </body>
</html>
